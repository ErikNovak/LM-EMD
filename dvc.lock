schema: '2.0'
stages:
  train:
    cmd: python src/train.py data/sasaki18 data/model.pth data/losses
    deps:
    - path: data/sasaki18
      md5: 6a8a419e77c9cc164224666ff2cad7c1.dir
      size: 18928496529
      nfiles: 10
    - path: src/library/bert_model.py
      md5: 354332f84c89ccecf778f53d8ce76254
      size: 6350
    - path: src/library/data_loader.py
      md5: 69cf839185b3d3da3c6866142cd28b59
      size: 4134
    - path: src/train.py
      md5: f5a9874f9fba8f963b9a63b528e1e2b3
      size: 6235
    params:
      params.yaml:
        model.nit: 500
        model.ranking: cls
        model.reg: 0.02
        train.epochs: 1
        train.epsilon: 1e-06
        train.grad_update_step: 16
        train.learning_rate: 1e-06
        train.loss: margin_ranking
        train.optimizer: adamw
        train.weight_decay: 0.01
    outs:
    - path: data/losses
      md5: d594791c5ae8f8a6144f98abd86bdd3a.dir
      size: 1950
      nfiles: 6
    - path: data/model.pth
      md5: d8073d2d0720a09e0a0bc8497068646b
      size: 711465576
  evaluate:
    cmd: python src/evaluate.py data/sasaki18 data/model.pth data/scores
    deps:
    - path: data/model.pth
      md5: d8073d2d0720a09e0a0bc8497068646b
      size: 711465576
    - path: data/sasaki18
      md5: 6a8a419e77c9cc164224666ff2cad7c1.dir
      size: 18928496529
      nfiles: 10
    - path: src/evaluate.py
      md5: b0a4de96a146b3c1dd8a3f897d09621d
      size: 5802
    - path: src/library/bert_model.py
      md5: 354332f84c89ccecf778f53d8ce76254
      size: 6350
    - path: src/library/data_loader.py
      md5: 69cf839185b3d3da3c6866142cd28b59
      size: 4134
    params:
      params.yaml:
        model.nit: 500
        model.ranking: cls
        model.reg: 0.02
        train.epochs: 1
        train.epsilon: 1e-06
        train.grad_update_step: 16
        train.learning_rate: 1e-06
        train.optimizer: adamw
        train.weight_decay: 0.01
    outs:
    - path: data/scores/data_en_de.json
      md5: 8818d61008fa405bbb5f604554a65201
      size: 50
    - path: data/scores/data_en_fr.json
      md5: a103ccfcdffff0d3f8b68b3dc56063c1
      size: 64
    - path: data/scores/data_en_ja.json
      md5: 7777f3f17b64d2aa9f0f91aa0effb79e
      size: 64
    - path: data/scores/data_en_sw.json
      md5: 233a59c61a75cad302dcf73cb607b581
      size: 34
    - path: data/scores/data_en_tl.json
      md5: 7c9a46b14d0719644e9276459e2ddfb3
      size: 64
    - path: data/scores/scores.json
      md5: ef91ee4ab8db7c3a8af4a966f6c113dd
      size: 2478
