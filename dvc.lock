schema: '2.0'
stages:
  train:
    cmd: python src/train.py data/sasaki18 data/model.pth data/losses
    deps:
    - path: data/sasaki18
      md5: 6a8a419e77c9cc164224666ff2cad7c1.dir
      size: 18928496529
      nfiles: 10
    - path: src/library/bert_model.py
      md5: 354332f84c89ccecf778f53d8ce76254
      size: 6350
    - path: src/train.py
      md5: c93e3b00a16173392367fa6928874063
      size: 6228
    params:
      params.yaml:
        model.nit: 500
        model.ranking: emd
        model.reg: 0.02
        train.epochs: 1
        train.epsilon: 1e-06
        train.grad_update_step: 16
        train.learning_rate: 1e-06
        train.loss: margin_ranking
        train.optimizer: adamw
        train.weight_decay: 0.01
    outs:
    - path: data/losses
      md5: 1debdb4f61dfd54f2d60dcc9c33cbb8a.dir
      size: 1866
      nfiles: 6
    - path: data/model.pth
      md5: 5aa1fa6e3e5e542ab8b191e0a8d2870c
      size: 711465576
  evaluate:
    cmd: python src/evaluate.py data/sasaki18 data/model.pth data/scores
    deps:
    - path: data/model.pth
      md5: 5aa1fa6e3e5e542ab8b191e0a8d2870c
      size: 711465576
    - path: data/sasaki18
      md5: 6a8a419e77c9cc164224666ff2cad7c1.dir
      size: 18928496529
      nfiles: 10
    - path: src/evaluate.py
      md5: 933f8b337c35ff74327e9949d6b1ba6f
      size: 5796
    - path: src/library/bert_model.py
      md5: 354332f84c89ccecf778f53d8ce76254
      size: 6350
    params:
      params.yaml:
        model.nit: 500
        model.ranking: emd
        model.reg: 0.02
        train.epochs: 1
        train.epsilon: 1e-06
        train.grad_update_step: 16
        train.learning_rate: 1e-06
        train.optimizer: adamw
        train.weight_decay: 0.01
    outs:
    - path: data/scores/data_en_de.json
      md5: 233a59c61a75cad302dcf73cb607b581
      size: 34
    - path: data/scores/data_en_fr.json
      md5: 233a59c61a75cad302dcf73cb607b581
      size: 34
    - path: data/scores/data_en_ja.json
      md5: 233a59c61a75cad302dcf73cb607b581
      size: 34
    - path: data/scores/data_en_sw.json
      md5: 233a59c61a75cad302dcf73cb607b581
      size: 34
    - path: data/scores/data_en_tl.json
      md5: 34003def70b54153c03851f838ae7d5a
      size: 64
    - path: data/scores/scores.json
      md5: c79b49c1b58ff2257587bb582a30f45c
      size: 2402
