schema: '2.0'
stages:
  train:
    cmd: python src/train.py data/sasaki18 data/model.pth data/losses
    deps:
    - path: data/sasaki18
      md5: b44b81841b7765d47eceacdc47c0d43a.dir
      size: 18928496529
      nfiles: 20
    - path: src/library/bert_model.py
      md5: 354332f84c89ccecf778f53d8ce76254
      size: 6350
    - path: src/train.py
      md5: ff2a97ce39e7d16ad49fc555a18b1adb
      size: 6230
    params:
      params.yaml:
        model.nit: 500
        model.ranking: mean
        model.reg: 0.02
        train.epochs: 1
        train.epsilon: 1e-06
        train.grad_update_step: 16
        train.learning_rate: 1e-06
        train.loss: margin_ranking
        train.optimizer: adamw
        train.weight_decay: 0.01
    outs:
    - path: data/losses
      md5: ed2a47b0b0c01566801c176d02787237.dir
      size: 1832
      nfiles: 6
    - path: data/model.pth
      md5: adef6bb4ac672d74a4f6a507ae977cba
      size: 711465576
  evaluate:
    cmd: python src/evaluate.py data/sasaki18 data/model.pth data/scores
    deps:
    - path: data/model.pth
      md5: ad1693995e16b29e73020373d7abcc10
      size: 711465576
    - path: data/sasaki18
      md5: b44b81841b7765d47eceacdc47c0d43a.dir
      size: 18928496529
      nfiles: 20
    - path: src/evaluate.py
      md5: 933f8b337c35ff74327e9949d6b1ba6f
      size: 5796
    - path: src/library/bert_model.py
      md5: 354332f84c89ccecf778f53d8ce76254
      size: 6350
    params:
      params.yaml:
        model.nit: 500
        model.ranking: cls
        model.reg: 0.02
        train.epochs: 1
        train.epsilon: 1e-06
        train.grad_update_step: 16
        train.learning_rate: 1e-06
        train.optimizer: adamw
        train.weight_decay: 0.01
    outs:
    - path: data/scores/data_en_de.json
      md5: c121969246be380d14a57876267e7267
      size: 50
    - path: data/scores/data_en_fr.json
      md5: 0310336085acc30c97389b4f2898fc1e
      size: 64
    - path: data/scores/data_en_ja.json
      md5: a6f2a19a85667e3af806e169932c1d59
      size: 64
    - path: data/scores/data_en_sw.json
      md5: 4f0622422f8b4e20f664d49c51c8564d
      size: 65
    - path: data/scores/data_en_tl.json
      md5: 576dbcfccf2a32c9759d7fcf100f5a92
      size: 64
    - path: data/scores/scores.json
      md5: ca3155eaa938321a2fb6ca97676ef80e
      size: 2504
